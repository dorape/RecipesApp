(this.webpackJsonpreact_app_blank=this.webpackJsonpreact_app_blank||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n.n(c),a=n(23),s=n.n(a),r=(n(34),n(35),n(9)),l=n(27),j=n(26),o=(n(36),n(14)),d=n(5),b=n(16),u=n(19),h=n.n(u),m=n(24),O=n(10),g=n(1),x=Object(c.createContext)(),p=function(e){var t=e.children,n="https://my-json-server.typicode.com/monikaem/json_mock/recipes",i=Object(c.useState)([]),a=Object(O.a)(i,2),s=a[0],r=a[1],l=Object(c.useState)(!1),j=Object(O.a)(l,2),u=j[0],p=j[1],f=Object(c.useState)(!1),v=Object(O.a)(f,2),N=v[0],y=v[1],C=Object(c.useState)(null),k=Object(O.a)(C,2),E=k[0],w=k[1],F=Object(c.useState)({title:"",img:"",ingredients:[],notes:""}),S=Object(O.a)(F,2),A=S[0],q=S[1],I=Object(c.useState)({show:!1,msg:"",type:""}),R=Object(O.a)(I,2),T=R[0],L=R[1],P=Object(c.useState)({title:!1,img:!1,ingredients:!1}),D=Object(O.a)(P,2),U=D[0],_=D[1],J=function(){var e=Object(m.a)(h.a.mark((function e(){var t,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.prev=1,e.next=4,fetch(n);case 4:return t=e.sent,e.next=7,t.json();case 7:c=e.sent,r(c),p(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),p(!1),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){J()}),[]);var V=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";L({show:e,type:t,msg:n})};return Object(g.jsx)(x.Provider,{value:{isLoading:u,recipes:s,handleSubmit:function(e){e.preventDefault();var t=function(){var e=A.title,t=A.img,n=A.ingredients,c=!0,i=!0,a=[];return(e.length<3||e.length>30)&&(c=!1),t||(i=!1),n.length&&n.forEach((function(e,t){var n={};(e.name.length<3||e.name.length>30)&&(n.name=!0),e.quantity<=0&&(n.quantity=!0),e.unit||(n.unit=!0),(n.name||n.quantity||n.unit)&&(a[t]=n)})),{correct:c&&i&&!a.length,titleValid:c,imgValid:i,ingredientsArrayErrors:a}}();t.correct?(!function(e){if(N)try{fetch(n+"/"+e.id,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipe:e})}).then((function(e){return e.json()}))}catch(t){console.log(t)}else try{fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipe:e})}).then((function(e){return e.json()}))}catch(t){console.log(t)}}(A),q({title:"",img:"",ingredients:[],notes:""}),V(!0,"success","item successfully ".concat(N?"updated":"added")),_({title:!1,img:!1,ingredients:!1}),y(!1)):(V(!0,"danger","Check the form again"),_({title:!t.titleValid,img:!t.imgValid,ingredients:Boolean(t.ingredientsArrayErrors.length)}))},activateEditing:function(e){y(!0),w(e);var t=s[e];q(t)},isEditingActive:N,deactivateEditing:function(){y(!1),w(null),q({title:"",img:"",ingredients:[],notes:""}),_({title:!1,img:!1,ingredients:!1})},newRecipe:A,handleAddNewIngredient:function(e){e.preventDefault();var t=Object(b.a)(A.ingredients),n=[].concat(Object(b.a)(t),[{name:"",quantity:1,unit:""}]);q(Object(d.a)(Object(d.a)({},A),{},{ingredients:n}))},handleChange:function(e){if(["name","quantity","unit"].includes(e.target.className)){var t=Object(b.a)(A.ingredients);t[e.target.dataset.id][e.target.className]=e.target.value,q(Object(d.a)(Object(d.a)({},A),{},{ingredients:t}))}else{var n=e.target.name,c=e.target.value;q(Object(d.a)(Object(d.a)({},A),{},Object(o.a)({},n,c)))}},editID:E,alert:T,showAlert:V,errors:U},children:t})},f=function(){return Object(c.useContext)(x)},v=function(){var e=f().deactivateEditing;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"nav",children:[Object(g.jsxs)("div",{className:"navlink-container",children:[Object(g.jsx)(r.c,{to:"/",children:Object(g.jsxs)("button",{className:"btn",onClick:e,children:["all recipes",Object(g.jsx)("i",{className:"icon-btn",children:Object(g.jsx)(j.a,{})})]})}),Object(g.jsx)(r.c,{to:"/add",children:Object(g.jsxs)("button",{className:"btn",onClick:e,children:["add recipe",Object(g.jsx)("i",{className:"icon-btn",children:Object(g.jsx)(l.a,{})})]})})]}),Object(g.jsx)("div",{className:"underline"})]})})},N=n(3),y="Empty dish name value!",C="Check the URl of the image!",k="Please fill all the ingredients inputs!",E=function(e){var t=e.name,n=e.quantity,c=e.unit,i=e.id,a=f().handleChange;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)("h5",{children:["Ingredient #",i+1]}),Object(g.jsxs)("div",{className:"form-control",children:[Object(g.jsx)("label",{htmlFor:"name",children:"Name: "}),Object(g.jsx)("input",{type:"text",name:"name","data-id":i,className:"name",value:t,onChange:a,id:"name",placeholder:"3-30 letters"})]}),Object(g.jsxs)("div",{className:"form-control",children:[Object(g.jsx)("label",{htmlFor:"quantity",children:"Quantity: "}),Object(g.jsx)("input",{type:"number",name:"quantity","data-id":i,className:"quantity",value:n,onChange:a,id:"quantity",min:"1"})]}),Object(g.jsxs)("div",{className:"form-control",children:[Object(g.jsx)("label",{htmlFor:"unit",children:"Unit: "}),Object(g.jsx)("input",{type:"text",name:"unit","data-id":i,className:"unit",value:c,onChange:a,id:"unit",placeholder:"kg, ml, tablespoon, teaspoon..."})]})]})},w=(n(44),function(e){var t=e.type,n=e.msg,i=e.removeAlert,a=e.newRecipe;return Object(c.useEffect)((function(){var e=setTimeout((function(){i()}),3e3);return function(){return clearTimeout(e)}}),[a]),Object(g.jsx)("p",{className:"alert alert-".concat(t),children:n})}),F=function(){var e=f(),t=e.handleSubmit,n=e.deactivateEditing,i=e.newRecipe,a=e.handleAddNewIngredient,s=e.handleChange,l=e.alert,j=e.showAlert,o=e.errors;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("div",{className:"form-container",children:[Object(g.jsxs)("form",{children:[Object(g.jsx)("h2",{children:"Add your own recipe!"}),Object(g.jsxs)("div",{className:"form-control",children:[Object(g.jsx)("label",{htmlFor:"title",children:"Dish Name: "}),Object(g.jsx)("input",{type:"text",name:"title",value:i.title,onChange:s,id:"title",placeholder:"3-30 letters"})]}),o.title&&Object(g.jsx)("p",{className:"error-input",children:y}),Object(g.jsxs)("div",{className:"form-control",children:[Object(g.jsx)("label",{htmlFor:"img",children:"Image URL: "}),Object(g.jsx)("input",{type:"text",name:"img",value:i.img,onChange:s,id:"img",placeholder:"Paste the image URL here"})]}),o.img&&Object(g.jsx)("p",{className:"error-input",children:C}),Object(g.jsxs)("div",{className:"form-control",children:[Object(g.jsx)("label",{htmlFor:"notes",children:"Your notes: "}),Object(g.jsx)("input",{type:"text",name:"notes",value:i.notes,onChange:s,id:"notes",placeholder:"Optional"})]}),Object(g.jsxs)("div",{className:"form-ingredients-container",children:[i.ingredients.map((function(e,t){return Object(c.createElement)(E,Object(d.a)(Object(d.a)({},e),{},{id:t,key:t}))})),o.ingredients&&Object(g.jsx)("p",{className:"error-input",children:k}),Object(g.jsx)("button",{className:"btn-ingredient",onClick:a,children:"Add Ingredient"})]}),Object(g.jsx)(r.b,{to:"/",children:Object(g.jsx)("button",{className:"btn",onClick:n,children:"Cancel"})}),Object(g.jsx)("button",{type:"submit",className:"btn",onClick:t,children:"Save Recipe"})]}),l.show&&Object(g.jsx)(w,Object(d.a)(Object(d.a)({},l),{},{removeAlert:j,newRecipe:i}))]})})},S=function(){var e=f().isEditingActive;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(F,{}),Object(g.jsx)(N.b,{render:function(){return e?null:Object(g.jsx)(N.a,{to:"/add"})}})]})},A=(n(45),n(46),n(29)),q=n(28),I=function(e){var t=e.img,n=e.title,c=e.ingredients,i=e.notes,a=e.id,s=f().activateEditing;return Object(g.jsxs)("article",{className:"recipe-item",children:[Object(g.jsx)("img",{src:t,alt:n,className:"photo"}),Object(g.jsxs)("div",{className:"recipe-info",children:[Object(g.jsx)("header",{children:Object(g.jsx)("h4",{children:n})}),Object(g.jsx)("p",{children:"Ingredients:"}),Object(g.jsx)("ul",{className:"ingredients-list",children:c.map((function(e,t){return Object(g.jsxs)("li",{children:[e.name," - ",e.quantity," ",e.unit]},t)}))}),i&&Object(g.jsxs)("p",{className:"additional-info",children:[Object(g.jsx)("i",{children:Object(g.jsx)(q.a,{})}),"Notes: ",i]}),Object(g.jsx)(r.b,{to:"/edit",children:Object(g.jsxs)("button",{className:"btn",onClick:function(){return s(a)},children:["Edit ",Object(g.jsx)(A.a,{})]})})]})]})},R=function(){var e=f().recipes;return Object(g.jsx)("div",{className:"recipes-section-center",children:e.map((function(e){return Object(c.createElement)(I,Object(d.a)(Object(d.a)({},e),{},{key:e.id}))}))})},T=function(){return Object(g.jsx)("div",{className:"items-container",children:Object(g.jsxs)("section",{className:"recipes-section",children:[Object(g.jsx)("div",{className:"title",children:Object(g.jsx)("h2",{children:"our recipes"})}),Object(g.jsx)("div",{className:"recipes-list",children:Object(g.jsx)(R,{})})]})})},L=(n(47),function(){return Object(g.jsx)(F,{})}),P=function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("main",{children:Object(g.jsxs)(N.d,{children:[Object(g.jsx)(N.b,{path:"/",exact:!0,component:T}),Object(g.jsx)(N.b,{path:"/add",exact:!0,component:L}),Object(g.jsx)(N.b,{pat:"/edit",exact:!0,component:S})]})})})};var D=function(){return f().isLoading?Object(g.jsx)("h1",{className:"loading",children:"Loading..."}):Object(g.jsx)(r.a,{basename:"/RecipesApp",children:Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(v,{}),Object(g.jsx)(P,{})]})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),i(e),a(e),s(e)}))};s.a.render(Object(g.jsx)(i.a.StrictMode,{children:Object(g.jsx)(p,{children:Object(g.jsx)(D,{})})}),document.getElementById("root")),U()}},[[48,1,2]]]);
//# sourceMappingURL=main.09c5bc9f.chunk.js.map